{% extends "layout.html" %}
{% block content %}
    <div class="content-section">
        <div class="media content-section">
            <div class="media-body" style="position: relative">
                <div class="lead border-bottom">
                    <strong>{{ person_be_reviewed.firstname }}, {{ person_be_reviewed.lastname }}</strong>
                    <small>/{{ person_be_reviewed.user[0].role }}</small>
                </div>
                <div>Employee ID: {{ person_be_reviewed.ownerId }}</div>
                <div>Username: {{ person_be_reviewed.user[0].username }}</div>
                {% if person_be_reviewed.user[0].role == "Student"%}
                    <div>Program: {{ program.name }}</div>
                    <div>Current GPA: {{ person_be_reviewed.gpa }}</div>
                {% endif %}
                <div>Status: {{ person_be_reviewed.status }}</div>
                {% if current_user.role == "Admin" %}
                    <button class="btn btn-outline-info" style="position: absolute; right:10px; top:40px" onclick="display()">
                        warning
                    </button>
                {% endif %}
            </div>
        </div>

        <div class="content-section" id="warning-form" style="display: none">
            <form method="POST", action="">
                {{ form.hidden_tag() }} <!--CSRF token-->
                <fieldset class="form-group">
                    <!-- Username input field setting -->
                    <div class="form-group mb-0">
                        <strong>{{ form.message.label(class="form-control-label") }}</strong>
                        {% if form.message.errors %}
                            {{ form.message(class="form-control form-control-lg is-invalid") }}
                            <div class="invalid-feedback">
                                {% for error in form.message.errors %}
                                    <span>{{ error }}</span>
                                {% endfor%}
                            </div>
                        {% else %}
                            {{ form.message(class="form-control form-control-lg") }}
                        {% endif %}
                    </div>
                </fieldset>
                <div class="form-group mb-0">
                    {{ form.submit(class="btn btn-outline-info") }}
                </div>
            </form>
        </div>

        <div class="content-section">
            <div class="lead border-bottom">
                <strong>Current Course</strong>
            </div>

            <table class="table table-condensed">
                <thead class="thead-light">
                    <tr>
                        {% if current_user.role == "Admin" %}
                            {% if person_be_reviewed.user[0].role == "Instructor" %}
                                <th>Course Name</th>
                                <th>Days/Times</th>
                                <th>Enroll total</th>
                                <th>Rating</th>
                            {% elif person_be_reviewed.user[0].role == "Student" %}
                                <th>Course Name</th>
                                <th>Instructor</th>
                                <th>Days/Times</th>
                                <th>Enroll total</th>
                                <th>Deregister</th>
                            {% endif %}
                        {% elif current_user.role == "Instructor" %}
                            <th>Course Name</th>
                            <th>Days/Times</th>
                            <th>Enroll total</th>
                            <th>Rating</th>
                        {% elif current_user.role == "Student" %}
                            <th>Course Name</th>
                            <th>Instructor</th>
                            <th>Days/Times</th>
                            <th>Give Rating</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for course in current_courses %}
                        <tr>
                            {% if current_user.role == "Admin" %}
                                {% if person_be_reviewed.user[0].role == "Instructor" %}
                                    <td>
                                        <a href="{{ url_for('course_review', course_Id=course.id) }}">
                                            {{ course.coursename }}
                                        </a>
                                    </td>
                                    <td> {{ course.dayofweek }} {{ course.startPeriod }} - {{ course.endPeriod }}</td>
                                    <td> {{ course.getEnrolledTotal() }} </td>
                                     <td> {{ course.getAvgRating() }} </td>
                                {% elif person_be_reviewed.user[0].role == "Student" %}
                                    <td>
                                        <a href="{{ url_for('course_review', course_Id=course.id) }}">
                                            {{ course.coursename }}
                                        </a>
                                    </td>
                                    <td>
                                        <a href="{{ url_for('individual_review',role='Instructor',owner_id=course.instructorId)}}">
                                            {{ course.getInstructorName() }}
                                        </a>
                                    </td>
                                    <td> {{ course.dayofweek }} {{ course.startPeriod }} - {{ course.endPeriod }}</td>
                                    <td> {{ course.getEnrolledTotal() }} </td>
                                    <td> <a class="btn btn-outline-info" href="#" > De-register </a> </td>
                                {% endif %}
                            {% elif current_user.role == "Instructor" %}
                                <td>
                                    <a href="{{ url_for('course_review', course_Id=course.id) }}">
                                        {{ course.coursename }}
                                    </a>
                                </td>
                                <td> {{ course.dayofweek }} {{ course.startPeriod }} - {{ course.endPeriod }}</td>
                                <td> {{ course.getEnrolledTotal() }} </td>
                                <td> rating </td>
                            {% elif current_user.role == "Student" %}
                                <td> {{ course.coursename }} </td>
                                <td> {{ course.getInstructorName() }} </td>
                                <td> {{ course.dayofweek }} {{ course.startPeriod }} - {{ course.endPeriod }} </td>
                                <td>
                                    <a class="btn btn-outline-info" style="text-decoration: none;" href="{{ url_for('course_rating',courseId=course.id)}}">
                                        Reviews
                                    </a>
                                </td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="content-section">
            <div class="lead border-bottom">
                <strong>Previous Course</strong>
            </div>
            <table class="table table-condensed">
                <thead class="thead-light">
                    <tr>
                        {% if person_be_reviewed.user[0].role == "Instructor" %}
                            <th>Course Name</th>
                            <th>Days/Times</th>
                            <th>Enroll total</th>
                            <th>Rating</th>
                            <th>Average GPA</th>
                            <th>Reviews</th>
                        {% elif person_be_reviewed.user[0].role == "Student" %}
                            <th>Course Name</th>
                            <th>Instructor</th>
                            <th>Days/Times</th>
                            <th>Grade</th>
                            <th>Reviews</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for course in past_courses%}
                        <tr>
                            {% if person_be_reviewed.user[0].role == "Instructor" %}
                                <td>
                                    <a href="{{ url_for('course_review', course_Id=course.id) }}">
                                        {{ course.coursename }}
                                    </a>
                                </td>
                                <td> {{ course.dayofweek }} {{ course.startPeriod }} - {{ course.endPeriod }}</td>
                                <td> {{ course.getEnrolledTotal() }} </td>
                                <td> {{ course.getAvgRating() }} </td>
                                <td> {{ course.getClassGpa() }}</td>
                                <td>
                                    <a class="btn btn-outline-info" style="text-decoration: none;" href="{{ url_for('course_rating',courseId=course.id)}}">
                                        Reviews
                                    </a>
                                </td>
                            {% elif person_be_reviewed.user[0].role == "Student" %}
                                <td> {{ course.coursename }} </td>
                                <td> {{ course.getInstructorName() }} </td>
                                <td> {{ course.dayofweek }} {{ course.startPeriod }} - {{ course.endPeriod }} </td>
                                <td> {{ course.getStudentGrade(person_be_reviewed.ownerId) }}</td>
                                <td>
                                    <a class="btn btn-outline-info" style="text-decoration: none;" href="{{ url_for('course_rating',courseId=course.id)}}">
                                        Reviews
                                    </a>
                                </td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        var warningForm = document.getElementById("warning-form");
        function display(){
            if(warningForm.style.display=="none"){
                warningForm.style.display="";
            }
            else{
                warningForm.style.display="none";
            }
        }
    </script>
{% endblock content %}

